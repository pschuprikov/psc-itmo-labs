\section{Постановка задачи визуализации приливных волн}
\label{problem_statement}

Важной частью постановки задачи является имеющаяся инфраструктура, в рамках которой
метод, решающий данную задачу, должен быть реализован.

\subsection{Модель водной поверхности}
Основным элементом инфраструктуры, с котором придется взаимодействовать, является реализованная
в ней модель водной поверхности. Данная модель представляет собой карту высот, построенную с помощью 
суммирования небольшого (около десяти) числа периодических функций, вычисленных в заданной точке 
водной поверхности. Если опустить множественные детали реализации, каждой периодической функции 
походит на т. н. волны Герстнера (Gerstner):
$$
\begin{array}{ccl}
    \mathbf{x} & = & \mathbf{x_0} - (\mathbf{k} / ||k||)  A \sin(\mathbf{k} \cdot \mathbf{x} - \omega t)\\
    h & = & A \cos(\mathbf{k} \cdot \mathbf{x_0} - \omega t).
\end{array}
$$
Пример использования подобных волн можно найти в работе \cite{tessendorf} и многих других, 
из которых можно выделить работу \cite{mixed}, совмещающую эту модель волны и реально наблюдаемые в природе 
спектральные характеристики водной поверхности.

Полученная таким образом карта высот визуализируется с помощью популярной техники проективной сетки 
(подробнее в работе \cite{projected}). 

Стоит также заметить, что несмотря на то, что данная модель поддерживает и штормовые погодные условия,
в данной работе погодные условия предполагаются спокойными с незначительными колебаниями геометрии волн.

\subsection{Ландшафт и система освещение}
Никаких специальных ограничений на ландшафт не накладывается, однако предполагается возможным получить
контур береговой линии, которому высота ландшафта и уровень моря должны приблизительно соответствовать.

Важным моментом является система освещения, а именно предполагается использование техники, известной как
\emph{отложенное освещение} (англ.~deferred shading), рассматриваемой, например в работе
\cite{deferred}. В данной технике, все необходимые для 
освещения данные о визуализируемых объектах сохраняются в специальной экранной структуре, 
называемой G-буфером (англ.~G-buffer). Примерами таких данных могут служить: нормаль к поверхности
($\mathbf{N}$), альбедо ($\mathbf{D}$), отражаемый цвет ($\mathbf{S}$), степень отражения
($S_{\mathrm{pow}}$) глубина и другие (в зависимости
от реализации), затем используя накопленные в G-буфере данные рассчитывается освещение всей сцены.
Одной из наиболее простых и, одновременно широко применяемых моделей освещения является модель Фонга 
(англ.~Phong), обозначая за $\mathbf{C}$ интенсивность источника, за $\mathbf{R}$ и $\mathbf{L}$
направление отраженного света и направление на источник света соответственно,
наконец, обозначим за $\mathbf{A}$ --- окружающий свет, формула принимает такой вид:
$$
    \mathrm{Color} = \mathbf{D} \mathbf{A} + \mathbf{C} \max \{ \mathbf{N} \cdot \mathbf{L}, 0\} + 
    \mathbf{S} \mathbf{C} \max \{\mathbf{R} \cdot \mathbf{L}, 0 \}^{S_\mathrm{pow}}
$$

\subsection{Постановка задачи}
Рассмотрев окружение в котором нужно решать задачу перейдем теперь к постановке задачи. Итак, требуется
разработать систему, реализующую комплекс эффектов, порожденных приливными волнами в прибрежных зонах.
Данный комплекс эффектов должен включать:
\begin{enumerate}
\item \textbf{Эффект прибоя.} При приближении приливной волны к берегу, нижние слои воды испытывают 
существенное трение и заметно замедляются относительно верхних слоев, что приводит к <<опрокидыванию>> 
гребня и  образования пены, которую иногда называют \emph{барашками}. Эта пена представляет собой 
множество пузырьков воздуха на поверхности воды, образующихся из-за специфичных примесей и перемешивания 
воды и воздуха \cite{foam}.
\item \textbf{Накат приливной волны на берег.} Подходя к берегу, бурлящий гребень волны продолжает
движение, уводя с собой на берег некоторое количество пены и воды, которые спустя некоторое время 
откатывают обратно навстречу следующему гребню.
\item \textbf{Эффект <<мокрого песка>>.} Накатившая на берег вода впитывается в прибрежный песок,
обволакивая песчинки и меняя отражающие свойства материала песчинок, как результат, мы наблюдаем
потемнение песка после схода воды.
\end{enumerate}

Каждый из перечисленных эффектов необходимо реализовать таким образом, чтобы их визуализация оставалась
на хорошем уровне как при рассмотрении с ближнего плана, так и с дальнего (имеется в виду вид высоко
сверху, например, при наблюдении с камер беспилотного летательного аппарата). Площадь наблюдаемой
береговой линии может составлять десятки километров, поэтому требуется с осторожностью относится
к использованию структур данных, пропорциональных площади, на которой наблюдаются эффекты. Естественно для
сложных приложений виртуальной реальности, состоящих из множества компонент, время работы и 
объем используемой памяти, особенно памяти графического процессора, одного отдельного эффекта должны
быть минимизированы.
