\section{Визуализация прибоя}

\subsection{Генерация фронтов прибоя}
Задачу, решение которой будет описано в данном подразделе, сгенерировать 
фронты прибоя таким образом, чтобы в их расположении нельзя было разглядеть 
какого-то нижележащего шаблона. Основная опасность исходит от изолиний $y_c = \mathrm{const}$, потому 
как они представляют собой основную закономерность в параметрах эффекта.

Во-первых водное пространство от $y_c = 0$ до $y_c = y_\mathrm{max}$ было поделено на непересекающиеся 
полосы, каждая из которых использовала свой собственный шум, и идентифицировалась параметром $\mathrm{tid}$.
Полосы перемещались во времени, с помощью добавки вида $vt$ к $y_c$, где $v$ --- скорость фронта,
$t$ --- время виртуальной реальности.

Затем по $\mathrm{tid}$ волновой фронт идентифицировал соответствующую ему одномерную текстуру 
$\mathrm{front}$, которая на всем своем пространстве $[0,1]$ содержала несколько непересекающихся
случайно сгенерированных отрезков, каждый из которых соответствовал отдельному фронту прибоя и содержал
следующую информацию:
\begin{itemize}
\item $\mathrm{center}$ --- позиция центра фронта относительно $[0,1]$ текстурных координат;
\item $\mathrm{offset}$ --- отступ от края полосы до фронта;
\item $\mathrm{width}$ --- ширина фронта относительно $[0,1]$ текстурных координат;
\item $\mathrm{start}$ --- отступ от берега, на котором фронт должен появиться.
\end{itemize}

Параметры генерации данной информации настраиваются внешним образом и позволяют контролировать
среднюю ширину фронта, расстояние между фронтами и время появления фронтов.

Для того, чтобы придать фронту ощущение движения, используя $\mathrm{tid}$ и некоторый сдвиг по времени
сдвиг относительно начала полосы модифицируется двумя другими 
(отличающимися частотой и силой шума) шумовыми периодическими текстурами.

Экспериментально оказалось, что только лишь предыдущего шума недостаточно, потому как из-за 
непредсказуемого отражения координат либо появляются дыры, либо (если сделать шум достаточно частым) 
становятся заметны полосы. Потому был сгенерирован шашечный паттерн, который накладывался поверх
предыдущего шума и имел параметрами $\mathrm{tid}$ и номер грани скелетона, из которого была
получена текущая трапеция. Полученный паттерн уже был не подвержен отражению текстурных координат.

\subsection{Визуализация пены}
По информацию предыдущего подраздела для любой точки внутри полосы легко можно было узнать, какое
время назад фронт находился в данной точке. На основании данной информации выбиралась интенсивность
пены. Пена представляет собой текстуру, наложенную по координатам $(x_c, y_c)$ под двумя разными углами
и прокручивающаяся по направлению к берегу.

Отражающая способность значительно отличается от отражающей способности водной поверхности, поэтому
в G-буфере были модифицированы данные об альбедо материала и уменьшена <<зеркальность>>.
